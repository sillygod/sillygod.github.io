"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{358:function(e,t,r){r.r(t);var n=r(7437),s=r(2265),a=r(8185),i=r(9733),o=r(2513),c=r(8002),l=r(6673),u=r(3353),d=r(2356),f=r(9359),h=r(7937),g=r(9016),x=r(3854);t.default=e=>{let{blinks:t}=e,[r,m]=(0,s.useState)(1),p=Object.keys(t).map(e=>{let r=Array.from(t[e]).length,n=Object.entries(t).filter(t=>{let[r,n]=t;return n instanceof Set?n.has(e):n.includes(e)}).length;return{id:e,x:200*Math.random()+50,y:200*Math.random()+50,connections:r+n}}),[b,y]=(0,s.useState)(p),[v,j]=(0,s.useState)([]),[k,w]=(0,s.useState)("0 0 400 400"),[z,N]=(0,s.useState)(null),E=(0,s.useRef)(null),M=(0,s.useRef)(null),S=(0,s.useRef)(null),Z=e=>{let t=new Set;return v.forEach(r=>{let n="string"==typeof r.source?r.source:r.source.id,s="string"==typeof r.target?r.target:r.target.id;n===e&&t.add(s),s===e&&t.add(n)}),t},Y=e=>x.BYU().domain([1,Math.max(...b.map(e=>e.connections))]).range([8,16])(e),B=e=>{let t=Math.max(e*r,4);return t>8?8:t},C=e=>{if(!E.current||!S.current)return;let t=x.Ys(E.current),r=x.P2S(E.current),n=r.k;switch(e){case"in":n*=1.5;break;case"out":n/=1.5;break;case"reset":n=1}let s=x.CRH.scale(n).translate(r.x,r.y);t.transition().duration(300).call(S.current.transform,s)};return(0,s.useEffect)(()=>{window.innerHeight>window.innerWidth?w("0 0 400 900"):w("0 0 400 400");let e=[];Object.entries(t).forEach(t=>{let[r,n]=t;n.forEach(t=>{b.some(e=>e.id===r)&&b.some(e=>e.id===t)&&e.push({source:r,target:t})})}),j(e);let r=(0,u.Z)(b).force("link",(0,d.Z)(e).id(e=>e.id).distance(40)).force("charge",(0,f.Z)().strength(-200)).force("center",(0,h.Z)(150,150)).force("collision",(0,g.Z)().radius(e=>Y(e.connections)+10)).on("tick",()=>{y([...r.nodes()])}),n=x.ohM().on("start",(e,t)=>{e.active||r.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y}).on("drag",(e,t)=>{e.subject.fx=e.x,e.subject.fy=e.y}).on("end",(e,t)=>{e.active||r.alphaTarget(0),e.subject.fx=null,e.subject.fy=null});M.current&&x.Ys(M.current).selectAll("circle").data(b).join("circle").call(n);let s=x.sPX().scaleExtent([.3,5]).on("zoom",e=>{M.current&&(m(e.transform.k),x.Ys(M.current).attr("transform",e.transform))});return S.current=s,E.current&&x.Ys(E.current).call(s),()=>{r.stop()}},[t]),(0,n.jsxs)(a.Zb,{className:"w-full mx-auto bg-transparent border-transparent relative",children:[(0,n.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-10",children:[(0,n.jsx)(i.z,{className:"bg-transparent",variant:"outline",size:"icon",onClick:()=>C("in"),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})}),(0,n.jsx)(i.z,{className:"bg-transparent",variant:"outline",size:"icon",onClick:()=>C("out"),children:(0,n.jsx)(c.Z,{className:"h-4 w-4"})}),(0,n.jsx)(i.z,{className:"bg-transparent",variant:"outline",size:"icon",onClick:()=>C("reset"),children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})]}),(0,n.jsxs)("svg",{ref:E,className:"w-full h-full",viewBox:k,style:{overflow:"hidden"},children:[(0,n.jsxs)("defs",{children:[(0,n.jsx)("marker",{id:"arrow-normal",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"3",orient:"auto",children:(0,n.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#24bde3"})}),(0,n.jsx)("marker",{id:"arrow-highlighted",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"3",orient:"auto",children:(0,n.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#3b82f6"})})]}),(0,n.jsxs)("g",{ref:M,children:[v.map((e,t)=>{let r="string"==typeof e.source?b.find(t=>t.id===e.source):e.source,s="string"==typeof e.target?b.find(t=>t.id===e.target):e.target;if(!r||!s)return null;let a=Y(r.connections),i=Y(s.connections),o=s.x-r.x,c=s.y-r.y,l=Math.sqrt(o*o+c*c),u="string"==typeof e.source?e.source:e.source.id,d="string"==typeof e.target?e.target:e.target.id,f=null!==z&&(u===z||d===z);return(0,n.jsx)("line",{x1:r.x+o/l*(a+2),y1:r.y+c/l*(a+2),x2:s.x-o/l*(i+2),y2:s.y-c/l*(i+2),stroke:f?"#3b82f6":"#4b5563",strokeWidth:f?"1.5":"0.5",markerEnd:f?"url(#arrow-highlighted)":"url(#arrow-normal)",opacity:f?1:.5,style:{transition:"stroke 0.2s ease-in-out, stroke-width 0.2s ease-in-out, opacity 0.2s ease-in-out"}},"edge-".concat(t))}),b.map(e=>{let t=z===e.id,r=null!==z&&Z(z).has(e.id),s=Y(e.connections);return(0,n.jsxs)("g",{onMouseEnter:()=>N(e.id),onMouseLeave:()=>N(null),className:"cursor-pointer",children:[(0,n.jsx)("circle",{cx:e.x,cy:e.y,r:s,fill:"transparent",stroke:t?"#3b82f6":r?"#60a5fa":"#9ca3af",strokeWidth:t||r?"2":"1",style:{filter:t?"drop-shadow(0 0 6px #3b82f6)":r?"drop-shadow(0 0 5px #60a5fa)":"drop-shadow(0 0 4px #3b82f6)",transition:"stroke 0.2s ease-in-out, stroke-width 0.2s ease-in-out, filter 0.2s ease-in-out"}}),(0,n.jsx)("text",{x:e.x,y:e.y+s+12,textAnchor:"middle",dominantBaseline:"middle",fill:t||r?"#ffffff":"#e5e7eb",style:{fontSize:"".concat(B(4),"px"),pointerEvents:"none",transition:"fill 0.2s ease-in-out"},children:e.id})]},e.id)})]})]})]})}},9733:function(e,t,r){r.d(t,{z:function(){return l}});var n=r(7437),s=r(2265),a=r(1538),i=r(2218),o=r(9354);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:l=!1,...u}=e,d=l?a.g7:"button";return(0,n.jsx)(d,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...u})});l.displayName="Button"}}]);